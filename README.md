### Версии
-__PHP__ При разработке проекта использовался php версии 7.4.21
-__CS-CART__ При разработке проекта использовался CS-CART версии CS-Cart Версия: 4.13.2.SP2
-__БД__ При разработке использовалась MySQL в связке с PhpMyAdmin
-__Сервер__ Для разработки проекта использовался Apache версии Apache/2.4.48 (Win64)
### К запуску
Для запуска и корректной работы приложение вам потребуется
-__1__ Необходимо запусить и настроить свой локальный или удоленный Хостинг
-__2__ Необходиму поместить на него все файлы проекта, загруженные с github или ZIP архива, прикрепленного мной 
-__3__ Если вы не указывали данные вашей db при устоновке CS-CART, то сделайте это прямо сейчас в файле
    config.local.php, находящемся в главной директории проекта (33-36 строчка)
-__4__ Необходиму подключить дамп базы данных, который был помещен в корневую директорию проекта. Она называется
    cscart.sql
-__6__ После это уже можно заходить на витрину магазина. В шапке магазина,нажав мой профиль "Отделы"
-__7__ Нажав на сылку, вы увидите список тестовых отделов. Если хотите, можете зайти на детальную страницу отдела 
    и ознакомиться с подробной информацией
-__8__ Также, имея доступ к панели администратора и нажав в шапке страницы на отдел "Покупатли", вы сможете
наблюдать подразде "Отделы", смело переходите на него
-__9__ Перейдя в подраздел "Отделы", можете  ознакомиться с возможностями этого модуля ( со всем, что указано в ТЗ)
    

### Тест-кейсы
___________________________________________________________________________________________
__№1__
Предварительные условия:
    1. Есть тестовый магазин с установленной модификацией
    2. Есть доступ к панели администратора
Действия:
   1. Заходим на главную страницу в панели администратора
   2. Нажать на раздел "Покупатели"
   3. Нажать на  раздел "Отделы"

Ожидаемы результат: Отображение спика отделов, присутствие кнопок для сортировки,
кнопки для создание нового отдела, формы поиска.
___________________________________________________________________________________________
__№2__
Предварительные условия:
       1. Есть тестовый магозин с установленной модификацией
       2. Есть доступ к панели администратора
Действия:
       1. Заходим на главную страницу в панели администратора
       2. Нажать на раздел "Покупатели"
       3. Нажать на раздел "Отделы"
       4. Нажать на кнопку "Создать отдел (+)"
       5. После перехода и указания всех данных нажать кнопку "Создать"

Ожидаемый результат: Добавление нового отдела со всеми данными, указынными в форме ранее.
___________________________________________________________________________________________
___________________________________________________________________________________________
__№3__
Предварительные условия:
       1. Есть тестовый магазин с установленной модификацией
       2. Есть доступ к панели администратора
Действия:
       1. Заходим на главную страницу в панели администратора
       2. Нажать на Покупатели
       3. Нажать на Отделы
       4. Выбираем и нажимем на непонравившиеся нам отделы
       5. Нажимаем на шистеренку после чего на удалить выбранное

Ожидаемы результат: Все выбронные файлы удоляются из списка отделов и базы данных
___________________________________________________________________________________________
___________________________________________________________________________________________
__№4__
Предусловие:
      1. Есть тестовый магозин с установленной модификацией
      2. Есть доступ к понели одминистратора
Действия:
       1. Заходим на главную страницу в понели администратора
       2. Нажать на раздел "Покупатели"
       3. Нажать на раздел "Отделы"
       4. Нажать  на поле "Статус" у любого отдела 
       5. В появившемся окне выбрать любой статус

Ожидаемый результат: При выборе статуса отличного от "вкыл." на витрине сайта в разделе "Отделы" должен пропасть 
    измененный элемент.
___________________________________________________________________________________________
___________________________________________________________________________________________
__№5__
Предварительные условия:
          1. Есть тестовый магазин с установленной модификацией
          2. Есть доступ к панели администратора
Действия:
          1. Заходим на главную страницу в панели администратора
          2. Нажать на  раздел "Покупатели"
          3. Нажать на раздел "Отделы"
          4. В форме поиска указываем данные нужного нам отдела

Ожидаемый результат: Должны отображаться только те отделы, которые подходят по параметрам поиска.
___________________________________________________________________________________________
### Авто тест
__Для создания автотеста использовался  codeception.__
__Для запуска автотестов  нужно__:
1. Для начала нам необходимо указать адрес  сайта, на котором будет проходить автотест. Делается это 
в файле acceptance.suite.yml, который в совою очередь расположен в папке tests. 


    actor: AcceptanceTester
    modules:
        enabled:
            - PhpBrowser:
                url: <ссылка на сайт>
            - \Helper\Acceptance
    step_decorators: ~


2. Автотесты запускаются через консоль, поэтому для начала нам нужно зайти в нее. Для этого
    нажимаем сочетание клавиш Win+r, в открывшемся окошке вводим cmd
3. Также для запуска автотестов нам необходимо находится непосредственно в директории,
где и находятся те самые автотесты, в нашем случае они находятся в папке tests, которая расположена 
в основной директории нашего проекта. __Чтобы перейти в главную директорию нашего проекта, нам потребуется__:


                        1. Перейти на диск, на котором лежит наш проект. Для этого нужно прописать
                        команду cd /<нужный нам диск> :\ если вы уже находитесь в нужнм диске, то
                        этого делать не надо
                        2. После того, как вы перешли в нужный диск, вам нужно перейти в директорию нашего проекта
                        для этого используется каманда cd <название директории>
3. После того, как вы выполнили все вшеперечисленные действия,вам понадобится просто 
прописать каманду php vendor/bin/codecept run --steps

Путь до файла с тестами: "tests\acceptance\FirstCest.php"
        
### ТЗ(Задачи, которые были поставлены)
__Создать Отделы__ В рамках задания необходимо создать новую сущность - "Отделы", в панели администратора CS-Cart в меню "Покупатели" (англ. Users) необходимо создать подраздел "Отделы"
__Работа с Отделами__ :

    1. Возможность удалить отдел

    2. Возможность перейти на страницу "создания отдела"

    3. Возможность перейти на страницу "редактирования отдела"

    4. Возможность поменять статус отдела (см. раздел "Поля отдела")

    5. Возможность поиска по статусу отдела и названию отдела

    6. Возможность сортировки по полям таблицы (название, статус)

    7. Паджинация
__Оформление__ Список отделов визуально должен был быть оформлен в общей стилистики
    CS-Cart и содержать минимум три поля (логотип, название, статус).
__Создание нового отдеа__ При создании нового отдела должны быть доступны следующие поля:
    
    1. Логотип (изображение)

    2. Название (языкозависимая переменная)

    3. Описание (языкозависимая переменная) 

    4. Руководитель (пользователь, задается пикером пользователей, можно выбрать только одного пользователя)

    5. Сотрудники (пользователи, задается пикером пользователей)

    6. Статус отдела (Вкл./выкл)
__Витрина__ На списке отделов в витрине  должны отображаться следующие поля отдела:
    
    1. логотип - по клику "переход на карточку отдела"

    2. название отдела - по клику  "переход на карточку отдела"

    3. фамилия и имя руководителя

На списке отделов должна также присутствовать паджинация, а также отображаться только отделы со статусом "Вкл."
    
### Как и что было реализовано:
__Создать видимое отображение перехода к Отделам__ Для того чтобы сделать видимое отображение перехода к Отделам,
мне понадобилось перейти по пути app/schemas/menu и зайти в файл menu.php, найти ключ central и в нем ключ customers,
и далее в ключ customers  добавить свое значение 'department'
__Работа с Отделами__ 
1. Возможность удалить отдел: удаления отдела реалезована с помощью функции fn_delete_departments(за 
основу взята функция fn_delete_banner_by_id), которая получает id удаляемого элемента. 
Всего у отделов существует 3 способа удоления 


    1.  В панели администратора на главной странице отделов при наведении на одел, появляется 
        шестеренка, нажав на нее, вам становятся доступны 2-ве кнопки: одна из них это "удалить"
    2. В панели администратора на главной странице отделов при нажатии на пустую облать отдела он
        становится выделенным  синим цветом (таким образом можно выделить несколько отделов) далее для 
        того чтобы удалить выделенные отделы, необходимо нажать на шестеренку, находящуюся в верхнем левом 
        углу экрана: в выпавшем окне вам просто нужно нажать "удалит выбранное"
    3. В панели администратора на главной странице отделов при переходе на страницу "редактирование отдела" (сделать это 
        можно наводя на отдел, псле чего нажав на шестеренку и выбрав пункт "редактировать" или просто 
        кликнуть на название отдела). После перехода на страницу "редактирование" в правом верхнем углу 
        напротив кнопки "сохранить" есть шестеренка, нажав на нее вы увидите кнопку "удалить", конторая также удаляет отдел

2. Возможность перейти на страницу "создания отдела": для перехода на страницу "создание нового отдела" 
был предусмотрен mode add_department, который срабатывает при нахождении в панели администратора на 
главной странице отделов и нажатии на + в правом верхнеи углу. Для сохранения всех укзанных данных в
бд используется функция fn_get_departments в связке с функцией fn_get_department_data 
(за основу функции fn_get_departments взята функция fn_get_banners)
3. Возможность перейти на страницу "редактирования отдела": чтобы перейти на страницу редактирования отдела
нужно находится в понели алминистратора на главной стронице отделов и нажать на название отдела или 
на появившейся при на ведение на отдел шестеренки. Для сахранения всех измененных данных используется
функция fn_get_departments в связке с функцией fn_get_department_data (за основу функции fn_get_departments
взята функция fn_get_banners)
4. Возможность поменять статус отдела (см. раздел "Поля отдела"): есть две возможности изменить статус
отдела 


    1. Реализована с помощью подключения файла status_on_manage.tpl. Для того чтобы поменять статус отдела, 
        нужно находиться в панели администратора на главной странице с отделами и в колонке "статус" менять, 
        нажимая на ячейку "статус", менять его.
    2. С помощью функции fn_get_department на странице редактирования отдела. Для того чтобы изменить
        статус этим способом, необходимо находиться в панели администратора на сранице "редактировать отдел"
        в поле "статус" выбрать каким он будет 
5. Возможность поиска по статусу отдела и названию отдела: для поиска по статусу и названию отдела была
написана функция fn_serch_department и добавлен контролер department_serch_form. Для работы с этим 
контройлером в форме "поиск" находящемся на главной странице отдело, нужно указать данны, по которым
собственно он и будет осуществляться
6. Возможность сортировки по полям таблицы (название, статус): сортировка была написана по образу и
подобию сортировки, находящейся в файле banners/manage

__Создание нового отдеа__ 
1. Логотип (изображение): добавление логотипа реализвана с помощью подключенного файлафайла attach_images.
    После добавления изображения оно обрабатывается функцией fn_get_image_pairs и помещяется в массив departments
    по 2 ключам: id отдела и main_pair

2. Название (языкозависимая переменная),  Описание (языкозависимая переменная): поля названия и описания
    были сделаны по образу и подобию таких же полей, находящихся в product/update.tpl также для корректного
    отображения wysiwyg был добавлен класс cm-wysiwyg и в файле controllers/backend/profiles.php была
    добавлена функция fn_trusted_vars('departments_data')


4. Руководитель (пользователь, задается пикером пользователей, можно выбрать только одного пользователя):
    пикер был создан путем подключения файла  picker.tpl. Также для настройки пикера администратора были использованы
    display="radio", view_mode="single_button". Добавляется администратор с помощью функции fn_get_departments.

5. Сотрудники (пользователи, задаются пикером пользователей): пикер был создан путем подключения файла
   picker.tpl. Для пикера пользователей было написнао 3 функции fn_department_delete_staff, fn_department_add_staff и
   fn_department_get_staff

__Отображение на витрине__
1. Логотип: для отображения логотипа был использован подключенный файл image.tpl 
    само изображение дастается из массива department по ключу main_pair, который мы задали в функции fn_get_departments.
    Также изображение было обернуто в тег a для перехода по нажатию на карточку отдела

2. Название отдела: Название отдела берётся из массива department по ключу department также
    обернуто в тег а для перехода на карточку отдела

3. фамилия и имя руководителя: фамилия и имя руководитяля получаются с помощью функции 
    fn_get_user_short_info, которая получает айди пользователя и возвращяет массив с информацией
    о нем. Имя и фамилия администратора также обернуты в переход на карточку отдела
__Карточка отдела__: карточка отдела сделана почти по аналогии со страницей бренда.
